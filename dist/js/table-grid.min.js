!function(){"use strict";angular.module("table.grid",["angularUtils.directives.dirPagination","ui.bootstrap","angular-bind-html-compile"]).run(["$rootScope","$filter",function(e,t){e.createUrl=function(e,n,i){return t("renderUrl")(e,n,i)}}])}(),angular.module("table.grid").run(["$templateCache",function(e){e.put("form-buttons.html",'<div class="clear"></div>\n\n<div class="button-group">\n    \x3c!-- BUTTONS TO INTERFACE \'view\' --\x3e\n    <div ng-if="type==\'view\'">\n        <div class="col-md-7 text-left">\n            <strong>{{label}}</strong>\n            <em class="text-muted">\n                <span ng-bind="extraData"></span>\n            </em>\n        </div>\n        <a ng-href="/#!/{{name}}" class="btn btn-default" uib-tooltip="Voltar" tooltip-placement="top" tooltip-trigger="mouseenter">\n            <i ng-if="hasIcon()" class="glyphicon glyphicon-chevron-left"></i>\n            <span ng-if="hasText()">Voltar</span>\n        </a>\n        <a ng-if="actionAllow(\'edit\')" ng-href="{{$root.createUrl(name, id, \'edit\')}}" class="btn btn-warning" uib-tooltip="Editar" uib-tooltip-placement="top" tooltip-trigger="mouseenter">\n            <i ng-if="hasIcon()" class="glyphicon glyphicon-edit"></i>\n            <span ng-if="hasText()">Editar</span>\n        </a>\n        <a ng-if="actionAllow(\'create\')" ng-href="{{$root.createUrl(name, id, \'create\')}}" class="btn btn-primary" uib-tooltip="Novo" tooltip-placement="top" tooltip-trigger="mouseenter">\n            <i ng-if="hasIcon()" class="glyphicon glyphicon-plus"></i>\n            <span ng-if="hasText()">Novo</span>\n        </a>\n    </div>\n    \n    \x3c!-- BUTTONS TO INTERFACE \'create|update\' --\x3e\n    <div ng-if="type==\'save\'">\n        <a ng-href="/#!/{{name}}" class="btn btn-default" uib-tooltip="Voltar" tooltip-placement="top" tooltip-trigger="mouseenter">\n            <i ng-if="hasIcon()" class="glyphicon glyphicon-chevron-left"></i>\n            <span ng-if="hasText()">Voltar</span>\n        </a>\n        <a ng-if="actionAllow(\'view\') && id" ng-href="{{$root.createUrl(name, id, \'view\')}}" class="btn btn-warning" uib-tooltip="Visualizar" tooltip-placement="top" tooltip-trigger="mouseenter">\n            <i ng-if="hasIcon()" class="glyphicon glyphicon-eye-open"></i>\n            <span ng-if="hasText()">Visualizar</span>\n        </a>\n        <button ng-if="actionAllow(\'edit\')" class="btn btn-blue" uib-tooltip="Salvar" tooltip-placement="top" tooltip-trigger="mouseenter">\n            <i ng-if="hasIcon()" class="glyphicon glyphicon-ok-sign"></i>\n            Salvar\n        </button>\n    </div>\n</div>'),e.put("header-grid.html",'<ul class="breadcrumb">\n    <li><a ng-href="/#!/">Home</a></li>\n    <li ng-repeat="row in lines">\n        <a ng-href="/#!/{{row.path}}" data-ng-show="row.path !== false">\n            <span data-ng-bind="row.label"></span>\n        </a>\n        <span data-ng-bind="row.label" data-ng-show="row.path===false"></span>\n    </li>\n</ul>'),e.put("label-grid.html",'<div class="label label-{{data.class}}" uib-tooltip="{{item}} : {{data.name}}" uib-tooltip-placement="top" uib-tooltip-trigger="mouseenter">\n    <span ng-show="hasIcon" class="glyphicon glyphicon-{{data.icon}}"></span>\n    <span ng-bind="data.name"></span>\n</div>'),e.put("search-grid.html",'<div ng-class="{\'template-head\': pagBottom == false, \'template-foot\': pagBottom == true}">\n    <div class="col-md-4">\n        <div ng-show="totalItems > limit">\n            <div class="text-center">\n                <dir-pagination-controls max-size="4" boundary-links="true" on-page-change="changePage(newPageNumber)"></dir-pagination-controls>\n            </div>\n        </div>\n        <div ng-show="totalItems == 0 && (filter != null && filter != \'\')">\n            <span class="glyphicon glyphicon-info-sign"></span>\n            Nenhum resultado encontrado para <strong>\'{{filter}}\'</strong>\n        </div>\n    </div>\n    \n    <div class="col-md-8" ng-if="withSearch">\n        <div class="input-group">    \n            <div class="input-group-btn" ng-if="changeLimit==false">\n                <a ng-href class="btn btn-default" style="cursor: move">\n                    <i ng-bind="currentPage+\'/\'+(totalItems/limit | round)+\' - \'+totalItems"></i>\n                </a>\n            </div>\n            <div class="input-group-btn" ng-if="changeLimit==true">\n                <div class="btn-group" role="group">\n                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                        <i ng-bind="currentPage+\'/\'+(totalItems/limit | round)+\' - \'+totalItems"></i>\n                        <span class="caret"></span>\n                    </button>\n                    <ul class="dropdown-menu">\n                        <li ng-repeat="item in limits" ng-class="{\'active\': item==limit}">\n                            <a role="button" ng-click="updateLimit(item)">{{item}}</a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <input type="text" ng-model="$parent.filter" ng-model-options="filterOptions" ng-change="listen()" class="form-control" placeholder="procure por um registro...">\n            <div class="input-group-btn" ng-show="withCreate==true">\n                <a ng-href="{{$root.createUrl(moduleName, null, \'create\')}}" class="btn btn-primary">\n                    <span class="glyphicon glyphicon-plus"></span>\n                    Novo\n                </a>\n            </div>    \n        </div>\n    </div>\n    \n    <div class="clear"></div>\n</div>'),e.put("table-action.html",'<div ng-if="actions.length>0 || customAction.length>0">\n    \n    <a ng-repeat="act in customAction" \n        ng-href="{{$root.createUrl(name, id, act.name)}}" \n        class="no-underline label label-{{act[\'label-ico\']}}"\n        uib-tooltip="{{act.label}}" tooltip-placement="top" tooltip-trigger="mouseenter">\n        <i class="glyphicon glyphicon-{{act.ico}}"></i>\n    </a>\n    \n    <a ng-if="actions.indexOf(\'view\') != -1" ng-href="{{$root.createUrl(name, id, \'view\')}}" class="no-underline label label-warning"\n       uib-tooltip="Visualizar" tooltip-placement="top" tooltip-trigger="mouseenter">\n        <span class="glyphicon glyphicon-eye-open"></span>\n    </a>\n    <a ng-if="actions.indexOf(\'edit\') != -1" ng-href="{{$root.createUrl(name, id, \'edit\')}}" class="no-underline label label-primary"\n       uib-tooltip="Editar" uib-tooltip-placement="top" tooltip-trigger="mouseenter">\n        <span class="glyphicon glyphicon-edit"></span>\n    </a>\n    <a ng-if="actions.indexOf(\'remove\') != -1" ng-href role="button" ng-click="delete(id)" class="no-underline label label-danger"\n       uib-tooltip="Remover" tooltip-placement="top" tooltip-trigger="mouseenter">\n        <span class="glyphicon glyphicon-remove"></span>\n    </a>\n</div>'),e.put("table-grid.html",'\x3c!--Block with breadcrumb--\x3e\n<header-grid ng-if="showBreadcrumb==true" lines="lines"></header-grid>\n\n\x3c!--Block with pagination, search and add button--\x3e\n<paginate-search-grid \n    filter="filter" \n    limit="limit" \n    with-search="withSearch" \n    with-create="withCreate" \n    change-limit="changeLimit" \n    module-name="moduleName"\n    filter-options="filterOptions">\n</paginate-search-grid>\n\n\x3c!--Block with table template default--\x3e\n<table class="table table-striped table-bordered table-hover content table-responsive">\n    <thead>\n        <tr>\n            <th ng-repeat="f in fields">\n                <a role="button" ng-click="reOrder(f)" class="dark-link" ng-if="f.sort != undefined && f.sort==true">\n                    <i class="glyphicon glyphicon-triangle-{{ort[f.fk!=undefined?f.fk+\'.\'+f.column:f.column] == \'-\' ? \'top\' : \'bottom\'}}"></i>\n                </a>\n                {{f.label}}\n            </th>\n            <th ng-if="withActions">Ações</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr dir-paginate="model in model | orderBy: order | filter: filter | itemsPerPage: limit" current-page="currentPage">\n            <td ng-repeat="f in fields">                \n                <div ng-if="f.type==\'simple\'" ng-bind="renderLine(model, f, true)"\n                    uib-tooltip="{{renderLine(model, f, false)}}" tooltip-placement="top" tooltip-trigger="mouseenter"></div>\n\n                <div ng-if="f.type==\'filter\'">\n                    <span ng-bind="addFilter(model, f, f.filter)"></span>\n                </div>\n\n                <div ng-if="f.type==\'link\' && f.url !=undefined">\n                    <a ng-href="{{f.url==\'view\' ? $root.createUrl(moduleName, model[primaryKey],\'view\') : f.url }}" ng-bind="renderLine(model, f, true)"\n                    uib-tooltip="{{renderLine(model, f, false)}}" tooltip-placement="top" tooltip-trigger="mouseenter"></a>\n                </div>\n\n                <div ng-if="f.type==\'template\'">\n                    \x3c!-- Inform a custom template with a text ou html tag --\x3e\n                    <div ng-if="f.content!= undefined" bind-html-compile="f.content"></div> \n                    <label-item ng-if="f.content == undefined" has-icon="f.icon" item="{{f.column}}" index="model[f.column]"></label-item>\n                </div>\n            </td>\n            <td ng-if="withActions" style="text-align: center; padding-left: 0.4%; padding-right: 0.4%;">\n                <table-action id="model[primaryKey]" name="moduleName" actions="actions" custom-action="customAction"></table-action>\n            </td>\n        </tr>\n    </tbody>\n</table>\n<paginate-search-grid ng-if="pagBottom==true" filter="filter" limit="limit" with-search="false" with-create="false" module-name="moduleName" pag-bottom="true"></paginate-search-grid>')}]),angular.module("table.grid").constant("tableConfig",{defaultFilter:"",defaultLimit:5,defaultPrimaryKey:"_id",defaultOrientation:"-",defaultActions:["view","edit","remove","create"],enableButtons:!0,appLabels:{status:{0:{name:"Inativo",class:"default",icon:"ban-circle"},1:{name:"Ativo",class:"success",icon:"ok-circle"}}},baseUrlTmpl:"/#!/{module}",viewUrlTmpl:"/{id}/view",editUrlTmpl:"/{id}/edit",createUrlTmpl:"/create",debugMode:!1,url:"",authentication:null}),angular.module("table.grid").directive("formButtons",function(){return{restrict:"E",templateUrl:"form-buttons.html",scope:{id:"=id",name:"=?name",type:"@type",label:"@label",extraData:"=?extraData",actions:"=?actions",renderText:"@renderText"},controller:["$scope","$filter","tableConfig",function(e,t,n){e.actions=e.actions||n.defaultActions,e.type=angular.isDefined(e.type)?e.type:"save",e.renderText=angular.isDefined(e.renderText)?e.renderText:"text",e.hasIcon=function(){return/(icon|text-icon)/.test(e.renderText)},e.hasText=function(){return/(text|text-icon)/.test(e.renderText)},e.actionAllow=function(t){return-1!=e.actions.indexOf(t)}}]}}),angular.module("table.grid").directive("headerGrid",function(){return{restrict:"E",templateUrl:"header-grid.html",scope:{lines:"=?lines"},controller:["$scope","$location","tableConfig",function(e,t,n){e.lines=e.lines||[],e.lines.length>0&&(e.lines.reverse(),e.lines[0].path=!1,e.lines.reverse()),n.debugMode&&console.log("headerGrid",e)}]}}),angular.module("table.grid").directive("labelItem",function(){return{restrict:"E",templateUrl:"label-grid.html",scope:{hasIcon:"=?hasIcon",index:"=?index",item:"@item",addIndex:"@addIndex"},controller:["$scope","tableConfig",function(e,t){e.hasIcon=void 0==e.hasIcon||e.hasIcon;var n=t.appLabels[e.item];void 0!=n&&void 0!=n[e.index]&&(e.data=n[e.index],void 0!=e.data&&"object"==typeof e.data.name&&void 0!=e.addIndex&&(e.data.name=e.data.name[e.addIndex])),t.debugMode&&console.log("labelItem",e)}]}}),angular.module("table.grid").directive("paginateSearchGrid",function(){return{restrict:"E",templateUrl:"search-grid.html",scope:{moduleName:"=moduleName",limit:"=?limit",filter:"=?filter",withCreate:"=?withCreate",withSearch:"=?withSearch",changeLimit:"=?changeLimit",pagBottom:"=?pagBottom",filterOptions:"=?filterOptions"},controller:["$scope","$location","paginationService","$timeout","tableConfig","$filter",function(e,t,n,i,a,o){e.totalItems=0,e.currentPage=1,e.limits=[5,10,25,50,100,1e3],e.withSearch=void 0==e.withSearch||e.withSearch,e.withCreate=void 0==e.withCreate||e.withCreate,e.pagBottom=void 0!=e.pagBottom&&e.pagBottom,e.changeLimit=void 0!=e.changeLimit&&e.changeLimit,e.filterOptions=e.filterOptions||{updateOn:"default"},e.limit=e.limit||a.defaultLimit,e.filter=e.filter||a.defaultFilter,e.changePage=function(t){e.currentPage=t},e.listen=function(){i(function(){var t=n.getLastInstanceId();null!=t?e.totalItems=n.getCollectionLength(t):e.listen()},100)},e.updateLimit=function(t){e.limit=t},e.listen(),a.debugMode&&console.log("paginateSearchGrid",e)}]}}),angular.module("table.grid").directive("tableAction",function(){return{restrict:"E",templateUrl:"table-action.html",scope:{id:"=?id",name:"=?name",actions:"=?actions",customAction:"=?customAction"},controller:["$scope","tableConfig","$location","$filter",function(e,t,n,i){e.id=e.id||0,e.name=e.name||"-",e.actions=e.actions||[],e.customAction=e.customAction||[],e.delete=function(t){if(void 0==t||0==t)throw"The informed 'id' no is valid";if("function"!=typeof e.$root.delete)throw"The current controller no have 'delete' method";e.$root.delete(t)},t.debugMode&&console.log("tableAction",e)}]}}),angular.module("table.grid").directive("tableGrid",function(){return{restrict:"E",templateUrl:"table-grid.html",scope:{model:"=model",fields:"=fields",filter:"=?filter",limit:"=?limit",moduleName:"=?moduleName",showBreadcrumb:"=?showBreadcrumb",order:"@order",primaryKey:"@primaryKey",orientation:"@orientation",withActions:"=?withActions",lines:"=?lines",withSearch:"=?withSearch",withCreate:"=?withCreate",pagBottom:"=?pagBottom",changeLimit:"=?changeLimit",filterOptions:"=?filterOptions",actions:"=?actions",customAction:"=?customAction"},controller:["$scope","$location","$filter","tableConfig","$compile","$sce",function(e,t,n,i,a,o){if(void 0==e.model||void 0==e.fields)throw"the configuration base is not informed!";e.currentPage=1,e.moduleName=e.moduleName||t.$$path.replace("/",""),e.showBreadcrumb=void 0==e.showBreadcrumb||e.showBreadcrumb,e.withSearch=void 0==e.withSearch||e.withSearch,e.withCreate=void 0==e.withCreate||e.withCreate,e.withActions=void 0==e.withActions||e.withActions,e.changeLimit=void 0!=e.changeLimit&&e.changeLimit,e.orientation=void 0!=e.orientation?e.orientation:i.defaultOrientation,e.order=e.order||e.orientation+i.defaultPrimaryKey,e.limit=e.limit||i.defaultLimit,e.filter=e.filter||i.defaultFilter,e.actions=e.actions||i.defaultActions,e.primaryKey=e.primaryKey||i.defaultPrimaryKey,e.customAction=e.customAction||[],e.ort={};for(var l in e.fields){var r=e.fields[l],c=void 0!=r.fk?r.fk+"."+r.column:r.column;e.ort[c]=e.orientation}e.addFilter=function(e,t,i){return 2==i.length?n(i[0])(this.renderLine(e,t),i[1]):"-"},e.renderLine=function(e,t,n){var i=function(e,t){return 1==e&&"string"==typeof t&&t.length>20?t.substr(0,20)+"...":t};if(void 0!==t.fk){if(void 0!=e[t.fk]&&void 0!=e[t.fk][t.column])return i(n,e[t.fk][t.column])}else if(void 0!=e[t.column])return i(n,e[t.column]);return"-"},e.reOrder=function(t){var n=void 0!=t.fk?t.fk+"."+t.column:t.column;e.orientation="-"==e.orientation?"":"-",e.order=e.orientation+t.column,e.ort[n]=e.orientation},i.debugMode&&console.log("tableGrid",e)}]}}),angular.module("table.grid").filter("renderUrl",["tableConfig",function(e){return function(t,n,i){var a=e.baseUrlTmpl.replace("{module}",t),o="";if("object"==typeof n&&null!=n){var l=[];for(var r in n)l.push(n[r]);o="/"+l.join("/")}else switch(i){case"create":o=e.createUrlTmpl;break;case"edit":o=e.editUrlTmpl.replace("{id}",n);break;case"view":o=e.viewUrlTmpl.replace("{id}",n);break;default:o="/"+n+"/"+i}return a+o}}]).filter("round",function(){return function(e,t){return t=void 0==t?"ceil":t,"NaN"==String(e)?1:Math[t](e)}}).filter("trustAsHtml",["$sce",function(e){return e.trustAsHtml}]);