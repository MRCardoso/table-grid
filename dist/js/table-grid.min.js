!function(){"use strict";angular.module("table.grid",["angularUtils.directives.dirPagination","ui.bootstrap"]).run(["$rootScope","$filter",function(e,t){e.createUrl=function(e,i,n){return t("renderUrl")(e,i,n)}}])}(),angular.module("table.grid").run(["$templateCache",function(e){e.put("header-grid.html",'<ul class="breadcrumb">\r\n    <li><a ng-href="/#!/">Home</a></li>\r\n    <li ng-repeat="row in lines">\r\n        <a ng-href="/#!/{{row.path}}" data-ng-show="row.path !== false">\r\n            <span data-ng-bind="row.label"></span>\r\n        </a>\r\n        <span data-ng-bind="row.label" data-ng-show="row.path===false"></span>\r\n    </li>\r\n</ul>'),e.put("label-grid.html",'<div class="label label-{{data.class}}" uib-tooltip="{{item}} : {{data.name}}" uib-tooltip-placement="top" uib-tooltip-trigger="mouseenter">\r\n    <span ng-show="hasIcon" class="glyphicon glyphicon-{{data.icon}}"></span>\r\n    <span ng-bind="data.name"></span>\r\n</div>'),e.put("search-grid.html",'<div ng-class="{\'template-head\': pagBottom == false, \'template-foot\': pagBottom == true}">\r\n    <div class="col-md-4">\r\n        <div ng-show="totalItems > limit">\r\n            <div class="text-center">\r\n                <dir-pagination-controls max-size="4" boundary-links="true" on-page-change="changePage(newPageNumber)"></dir-pagination-controls>\r\n            </div>\r\n        </div>\r\n        <div ng-show="totalItems == 0 && (filter != null && filter != \'\')">\r\n            <span class="glyphicon glyphicon-info-sign"></span>\r\n            Nenhum resultado encontrado para <strong>\'{{filter}}\'</strong>\r\n        </div>\r\n    </div>\r\n    \r\n    <div class="col-md-8" ng-if="withSearch">\r\n        <div class="input-group">    \r\n            <div class="input-group-btn" ng-if="changeLimit==false">\r\n                <a ng-href class="btn btn-default" style="cursor: move">\r\n                    <i ng-bind="currentPage+\'/\'+(totalItems/limit | round)+\' - \'+totalItems"></i>\r\n                </a>\r\n            </div>\r\n            <div class="input-group-btn" ng-if="changeLimit==true">\r\n                <div class="btn-group" role="group">\r\n                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\r\n                        <i ng-bind="currentPage+\'/\'+(totalItems/limit | round)+\' - \'+totalItems"></i>\r\n                        <span class="caret"></span>\r\n                    </button>\r\n                    <ul class="dropdown-menu">\r\n                        <li ng-repeat="item in limits" ng-class="{\'active\': item==limit}">\r\n                            <a role="button" ng-click="updateLimit(item)">{{item}}</a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <input type="text" ng-model="$parent.filter" ng-model-options="filterOptions" ng-change="listen()" class="form-control" placeholder="procure por um registro...">\r\n            <div class="input-group-btn" ng-show="withCreate==true">\r\n                <a ng-href="{{$root.createUrl(moduleName, null, \'create\')}}" class="btn btn-primary">\r\n                    <span class="glyphicon glyphicon-plus"></span>\r\n                    Novo\r\n                </a>\r\n            </div>    \r\n        </div>\r\n    </div>\r\n    \r\n    <div class="clear"></div>\r\n</div>'),e.put("table-action.html",'<div ng-if="actions.length>0 || customAction.length>0">\n    \n    <a ng-repeat="act in customAction" \n        ng-href="{{$root.createUrl(name, id, act.name)}}" \n        class="no-underline label label-{{act[\'label-ico\']}}"\n        uib-tooltip="{{act.label}}" tooltip-placement="top" tooltip-trigger="mouseenter">\n        <i class="glyphicon glyphicon-{{act.ico}}"></i>\n    </a>\n    \n    <a ng-if="actions.indexOf(\'view\') != -1" ng-href="{{$root.createUrl(name, id, \'view\')}}" class="no-underline label label-warning"\n       uib-tooltip="Visualizar" tooltip-placement="top" tooltip-trigger="mouseenter">\n        <span class="glyphicon glyphicon-eye-open"></span>\n    </a>\n    <a ng-if="actions.indexOf(\'edit\') != -1" ng-href="{{$root.createUrl(name, id, \'edit\')}}" class="no-underline label label-primary"\n       uib-tooltip="Editar" uib-tooltip-placement="top" tooltip-trigger="mouseenter">\n        <span class="glyphicon glyphicon-edit"></span>\n    </a>\n    <a ng-if="actions.indexOf(\'remove\') != -1" ng-href role="button" ng-click="delete(id)" class="no-underline label label-danger"\n       uib-tooltip="Remover" tooltip-placement="top" tooltip-trigger="mouseenter">\n        <span class="glyphicon glyphicon-remove"></span>\n    </a>\n</div>'),e.put("table-grid.html",'\x3c!--Block with breadcrumb--\x3e\r\n<header-grid ng-if="showBreadcrumb==true" lines="lines"></header-grid>\r\n\r\n\x3c!--Block with pagination, search and add button--\x3e\r\n<paginate-search-grid \r\n    filter="filter" \r\n    limit="limit" \r\n    with-search="withSearch" \r\n    with-create="withCreate" \r\n    change-limit="changeLimit" \r\n    module-name="moduleName"\r\n    filter-options="filterOptions">\r\n</paginate-search-grid>\r\n\r\n\x3c!--Block with table template default--\x3e\r\n<table class="table table-striped table-bordered table-hover content table-responsive">\r\n    <thead>\r\n        <tr>\r\n            <th ng-repeat="f in fields">\r\n                <a role="button" ng-click="reOrder(f)" class="dark-link" ng-if="f.sort != undefined && f.sort==true">\r\n                    <i class="glyphicon glyphicon-triangle-{{ort[f.fk!=undefined?f.fk+\'.\'+f.column:f.column] == \'-\' ? \'top\' : \'bottom\'}}"></i>\r\n                </a>\r\n                {{f.label}}\r\n            </th>\r\n            <th ng-if="withActions">Ações</th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr dir-paginate="model in model | orderBy: order | filter: filter | itemsPerPage: limit" current-page="currentPage">\r\n            <td ng-repeat="f in fields">                \r\n                <div ng-if="f.type==\'simple\'" ng-bind="renderLine(model, f, true)"\r\n                    uib-tooltip="{{renderLine(model, f, false)}}" tooltip-placement="top" tooltip-trigger="mouseenter"></div>\r\n\r\n                <div ng-if="f.type==\'filter\'">\r\n                    <span ng-bind="addFilter(model, f, f.filter)"></span>\r\n                </div>\r\n\r\n                <div ng-if="f.type==\'link\' && f.url !=\'undefined\'">\r\n                    <a ng-href="{{f.url==\'view\' ? createUrl(moduleName, model[primaryKey]) : f.url }}" ng-bind="renderLine(model, f, true)"\r\n                    uib-tooltip="{{renderLine(model, f, false)}}" tooltip-placement="top" tooltip-trigger="mouseenter"></a>\r\n                </div>\r\n\r\n                <div ng-if="f.type==\'image\'">\r\n                    \x3c!---image-s3 url="renderLine(model, f)" path="f.pathImage" with-user-id="{{f.userId}}" alt="imagem" class="image-thumb-4"></image-s3--\x3e\r\n                </div>\r\n\r\n                <div ng-if="f.type==\'template\'">\r\n                    <label-item has-icon="f.icon" item="{{f.column}}" index="model[f.column]"></label-item>\r\n                </div>\r\n            </td>\r\n            <td ng-if="withActions" style="text-align: center; padding-left: 0.4%; padding-right: 0.4%;">\r\n                <table-action id="model[primaryKey]" name="moduleName" actions="actions" custom-action="customAction"></table-action>\r\n            </td>\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n<paginate-search-grid ng-if="pagBottom==true" filter="filter" limit="limit" with-search="false" with-create="false" module-name="moduleName" pag-bottom="true"></paginate-search-grid>')}]),angular.module("table.grid").constant("tableConfig",{defaultFilter:"",defaultLimit:5,defaultPrimaryKey:"_id",defaultOrientation:"-",defaultActions:["view","edit","remove"],enableButtons:!0,appLabels:{status:{0:{name:"Inativo",class:"default",icon:"ban-circle"},1:{name:"Ativo",class:"success",icon:"ok-circle"}}},baseUrlTmpl:"/#!/{module}",viewUrlTmpl:"/{id}/view",editUrlTmpl:"/{id}/edit",createUrlTmpl:"/create",debugMode:!1,url:"",authentication:null}),angular.module("table.grid").directive("headerGrid",function(){return{restrict:"E",templateUrl:"header-grid.html",scope:{lines:"=?lines"},controller:["$scope","$location","tableConfig",function(e,t,i){e.lines=e.lines||[],e.lines.length>0&&(e.lines.reverse(),e.lines[0].path=!1,e.lines.reverse()),i.debugMode&&console.log("headerGrid",e)}]}}),angular.module("table.grid").directive("labelItem",function(){return{restrict:"E",templateUrl:"label-grid.html",scope:{hasIcon:"=?hasIcon",index:"=?index",item:"@item",addIndex:"@addIndex"},controller:["$scope","tableConfig",function(e,t){e.hasIcon=void 0==e.hasIcon||e.hasIcon;var i=t.appLabels[e.item];void 0!=i&&void 0!=i[e.index]&&(e.data=i[e.index],void 0!=e.data&&"object"==typeof e.data.name&&void 0!=e.addIndex&&(e.data.name=e.data.name[e.addIndex])),t.debugMode&&console.log("labelItem",e)}]}}),angular.module("table.grid").directive("paginateSearchGrid",function(){return{restrict:"E",templateUrl:"search-grid.html",scope:{moduleName:"=moduleName",limit:"=?limit",filter:"=?filter",withCreate:"=?withCreate",withSearch:"=?withSearch",changeLimit:"=?changeLimit",pagBottom:"=?pagBottom",filterOptions:"=?filterOptions"},controller:["$scope","$location","paginationService","$timeout","tableConfig","$filter",function(e,t,i,n,r,a){e.totalItems=0,e.currentPage=1,e.limits=[5,10,25,50,100,1e3],e.withSearch=void 0==e.withSearch||e.withSearch,e.withCreate=void 0==e.withCreate||e.withCreate,e.pagBottom=void 0!=e.pagBottom&&e.pagBottom,e.changeLimit=void 0!=e.changeLimit&&e.changeLimit,e.filterOptions=e.filterOptions||{updateOn:"default"},e.limit=e.limit||r.defaultLimit,e.filter=e.filter||r.defaultFilter,e.changePage=function(t){e.currentPage=t},e.listen=function(){n(function(){var t=i.getLastInstanceId();null!=t?e.totalItems=i.getCollectionLength(t):e.listen()},100)},e.updateLimit=function(t){e.limit=t},e.listen(),r.debugMode&&console.log("paginateSearchGrid",e)}]}}),angular.module("table.grid").directive("tableAction",function(){return{restrict:"E",templateUrl:"table-action.html",scope:{id:"=?id",name:"=?name",actions:"=?actions",customAction:"=?customAction"},controller:["$scope","tableConfig","$location","$filter",function(e,t,i,n){e.id=e.id||0,e.name=e.name||"-",e.actions=e.actions||[],e.customAction=e.customAction||[],e.delete=function(t){if(void 0==t||0==t)throw"The informed 'id' no is valid";if("function"!=typeof e.$root.delete)throw"The current controller no have 'delete' method";e.$root.delete(t)},t.debugMode&&console.log("tableAction",e)}]}}),angular.module("table.grid").directive("tableGrid",function(){return{restrict:"E",templateUrl:"table-grid.html",scope:{model:"=model",fields:"=fields",filter:"=?filter",limit:"=?limit",moduleName:"=?moduleName",showBreadcrumb:"=?showBreadcrumb",order:"@order",primaryKey:"@primaryKey",orientation:"@orientation",withActions:"=?withActions",lines:"=?lines",withSearch:"=?withSearch",withCreate:"=?withCreate",pagBottom:"=?pagBottom",changeLimit:"=?changeLimit",filterOptions:"=?filterOptions",actions:"=?actions",customAction:"=?customAction"},controller:["$scope","$location","$filter","tableConfig",function(e,t,i,n){if(void 0==e.model||void 0==e.fields)throw"the configuration base is not informed!";e.currentPage=1,e.moduleName=e.moduleName||t.$$path.replace("/",""),e.showBreadcrumb=void 0==e.showBreadcrumb||e.showBreadcrumb,e.withSearch=void 0==e.withSearch||e.withSearch,e.withCreate=void 0==e.withCreate||e.withCreate,e.withActions=void 0==e.withActions||e.withActions,e.changeLimit=void 0!=e.changeLimit&&e.changeLimit,e.orientation=void 0!=e.orientation?e.orientation:n.defaultOrientation,e.order=e.order||e.orientation+n.defaultPrimaryKey,e.limit=e.limit||n.defaultLimit,e.filter=e.filter||n.defaultFilter,e.actions=e.actions||n.defaultActions,e.primaryKey=e.primaryKey||n.defaultPrimaryKey,e.customAction=e.customAction||[],e.ort={};for(var r in e.fields){var a=e.fields[r],o=void 0!=a.fk?a.fk+"."+a.column:a.column;e.ort[o]=e.orientation}e.addFilter=function(e,t,n){return 2==n.length?i(n[0])(this.renderLine(e,t),n[1]):"-"},e.renderLine=function(e,t,i){var n=function(e,t){return 1==e&&"string"==typeof t&&t.length>20?t.substr(0,20)+"...":t};if(void 0!==t.fk){if(void 0!=e[t.fk]&&void 0!=e[t.fk][t.column])return n(i,e[t.fk][t.column])}else if(void 0!=e[t.column])return n(i,e[t.column]);return"-"},e.reOrder=function(t){var i=void 0!=t.fk?t.fk+"."+t.column:t.column;e.orientation="-"==e.orientation?"":"-",e.order=e.orientation+t.column,e.ort[i]=e.orientation},n.debugMode&&console.log("tableGrid",e)}]}}),angular.module("table.grid").filter("renderUrl",["tableConfig",function(e){return function(t,i,n){var r=e.baseUrlTmpl.replace("{module}",t),a="";if("object"==typeof i&&null!=i){var o=[];for(var l in i)o.push(i[l]);a="/"+o.join("/")}else switch(n){case"create":a=e.createUrlTmpl;break;case"edit":a=e.editUrlTmpl.replace("{id}",i);break;case"view":a=e.viewUrlTmpl.replace("{id}",i);break;default:a="/"+i+"/"+n}return r+a}}]).filter("round",function(){return function(e,t){return t=void 0==t?"ceil":t,"NaN"==String(e)?1:Math[t](e)}});